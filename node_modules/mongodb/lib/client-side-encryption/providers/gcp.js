"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
<<<<<<< HEAD
exports.loadGCPCredentials = loadGCPCredentials;
=======
exports.loadGCPCredentials = void 0;
>>>>>>> c1c7ef32b8a9c7d253610543a14cdbfbd3e3455e
const deps_1 = require("../../deps");
/** @internal */
async function loadGCPCredentials(kmsProviders) {
    const gcpMetadata = (0, deps_1.getGcpMetadata)();
    if ('kModuleError' in gcpMetadata) {
        return kmsProviders;
    }
    const { access_token: accessToken } = await gcpMetadata.instance({
        property: 'service-accounts/default/token'
    });
    return { ...kmsProviders, gcp: { accessToken } };
}
<<<<<<< HEAD
=======
exports.loadGCPCredentials = loadGCPCredentials;
>>>>>>> c1c7ef32b8a9c7d253610543a14cdbfbd3e3455e
//# sourceMappingURL=gcp.js.map